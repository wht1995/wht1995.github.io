(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{208:function(t,s,e){"use strict";e.r(s);var n=e(0),a=Object(n.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v("针对日趋复杂的 web 应用，web 安全问题逐渐暴露出来，也越来越引起开发者的重视。在大多数黑客的攻击案例中，XSS 和 CSRF 攻击是被利用的最多的方式。本文意在简单地了解 XSS 攻击方式。"),e("a",{attrs:{href:"https://juejin.im/post/5b6bf1136fb9a04fda4e4265#heading-4",target:"_blank",rel:"noopener noreferrer"}},[t._v("参考链接"),e("OutboundLink")],1)]),t._v(" "),e("p",[t._v("XSS 名为“跨站脚本攻击”（cross-site-script），因为首字母缩写和 CSS 样式扩展名重叠，故称为 XSS。")]),t._v(" "),e("p",[t._v("XSS 攻击分为三种类型：反射型（非持久型）、存储型（持久型）、基于 DOM。")]),t._v(" "),t._m(1),t._v(" "),e("p",[t._v("攻击者依靠一切可能的手段，想方设法在受害者的浏览器中执行自己的“有毒”脚本，例如窃取一些用户的敏感数据，把 cookie、session 发送给攻击者，将受害者重定向到由攻击者控制的网站，然后在受害者的机器上做一些恶意操作。")]),t._v(" "),t._m(2),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.hacksplaining.com/exercises/xss-stored",target:"_blank",rel:"noopener noreferrer"}},[t._v("演示"),e("OutboundLink")],1)]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.hacksplaining.com/exercises/xss-reflected",target:"_blank",rel:"noopener noreferrer"}},[t._v("演示"),e("OutboundLink")],1)]),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"xss-攻击"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击","aria-hidden":"true"}},[this._v("#")]),this._v(" XSS 攻击")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"xss-攻击方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xss-攻击方式","aria-hidden":"true"}},[this._v("#")]),this._v(" XSS 攻击方式")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"持久型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#持久型-xss","aria-hidden":"true"}},[this._v("#")]),this._v(" 持久型 XSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("攻击者将恶意代码提交到目标网站的数据库中")]),this._v(" "),s("li",[this._v("用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器")]),this._v(" "),s("li",[this._v("用户浏览器接收到响应后，混在其中的恶意代码也被执行了")]),this._v(" "),s("li",[this._v("恶意代码窃取用户数据并发送给攻击者，或者冒充用户的行为，调用目标网站的接口执行恶意操作")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("这种攻击常见于带有保存用户数据的网站，例如：论坛发帖、商品评论、用户私信等。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"非持久型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#非持久型-xss","aria-hidden":"true"}},[this._v("#")]),this._v(" 非持久型 XSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("攻击者构造特殊的 URL ，其中包含恶意代码")]),this._v(" "),s("li",[this._v("用户打开带有恶意代码的 URL 时，网站服务端将恶意代码取出，拼接在 HTML 中返回给浏览器")]),this._v(" "),s("li",[this._v("浏览器收到响应后解析执行，混在其中的恶意代码也被执行")]),this._v(" "),s("li",[this._v("恶意代码窃取用户数据并发送给攻击者，或者冒充用户的行为，调用目标网站的接口执行恶意操作")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("非持久型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"dom-型-xss"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dom-型-xss","aria-hidden":"true"}},[this._v("#")]),this._v(" DOM 型 XSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("攻击者构造出特殊的 URL ，其中包含恶意代码")]),this._v(" "),s("li",[this._v("引诱用户打开带有恶意代码的 URL")]),this._v(" "),s("li",[this._v("前端 JS 取出 URL 中的恶意代买并执行")]),this._v(" "),s("li",[this._v("恶意代码窃取用户数据并发送给攻击者，或者冒充用户的行为，调用目标网站的接口执行恶意操作")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("DOM 型 XSS 跟前两种 XSS 的区别：")]),this._v(" DOM 型的漏洞中，取出和执行恶意代码是由浏览器完成的，属于前端自身的安全漏洞，前面两种属于服务端的安全漏洞。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"如何防范"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何防范","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何防范")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ul",[e("li",[e("p",[t._v("HttpOnly 防止劫取 cookie")]),t._v(" "),e("p",[e("strong",[t._v("浏览器将禁止页面的 Javascript 访问带有 "),e("code",[t._v("HttpOnly")]),t._v(" 属性的 Cookie。")])]),t._v(" "),e("p",[t._v("严格来说，"),e("code",[t._v("HttpOnly")]),t._v(" 并非阻止 XSS 攻击，而是能阻止 XSS 攻击后的 Cookie 劫持攻击。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置cookie")]),t._v("\nresponse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addHeader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set-Cookie"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uid=112; Path=/; HttpOnly"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置https的cookie")]),t._v("\nresponse"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("addHeader")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Set-Cookie"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uid=112; Path=/; Secure; HttpOnly"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//设置后读取 cookie 的方法")]),t._v("\nCookie cookies"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCookies")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n")])])])]),t._v(" "),e("li",[e("p",[t._v("对输入/输出进行转义")]),t._v(" "),e("p",[t._v("不相信用户的任何输入，对于用户的输入要进行 "),e("strong",[t._v("检查")]),t._v("、"),e("strong",[t._v("转义")]),t._v(" 、"),e("strong",[t._v("过滤")]),t._v(" ，例如对 "),e("code",[t._v("& < > \" ' /")]),t._v(" 这几个字符进行转义")])])])}],!1,null,null,null);s.default=a.exports}}]);